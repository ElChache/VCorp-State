{"version":3,"sources":["vcorpstate/views/project_main.cljs"],"mappings":";AAOA;;;kDAAA,lDAAMA;AAAN,AAGE,uBAAA,AAAAC,nBAAMC,mCAAkB,sDAAA,mFAAA,zIAACC;0BAAzB,AAAAF,tBACMG,sCAAqB,sDAAA,mFAAA,zIAACD;uBAD5B,AAAAF,nBAEMI,mCAAkB,sDAAA,mFAAA,zIAACF;sBAFzB,AAAAF,lBAGMK,kCAAW,sDAAA,mFAAA,zIAACH;AAHlB,AAME,+DAAA,2CAAA,nGAACI,uLAEC;AAAA,AACE,oBAAMH;AAAN,AACE,uBAAA,mFAAA,1GAACI,4KAA2BJ;;AAC5B,8BAAA,mFAAA,1GAACI,sLAAgCJ;;AAFnC;;GAHJ,sFAQE,iBAAAK,NAAKG;AAAL,AAAA,IAAAF,aAAAD;QAAA,AAAAE,4CAAAD,WAAA,IAAA,/DAAWG;iBAAX,AAAAF,4CAAAD,WAAA,IAAA,xEAAaI;AAAb,AACE,IAAAC,aAA0BD;YAA1B,AAAAH,4CAAAI,WAAA,IAAA,nEAAOF;sBAAP,AAAAF,4CAAAI,WAAA,IAAA,7EAASC;AAAT,AACE,oBAAM,iBAAAC,oBAAKb;AAAL,AAAA,oBAAAa;AACK,OAACC,gDAAKd,oBAAoBY;;AAD/BC;;;AAAN,AAEE,uBAAA,mFAAA,1GAACT,4KAA2BJ;;AAC5B,8BAAA,mFAAA,1GAACI,sLAAgCJ;;AAHnC;;GAVN,yEAgBE;AAAA,AAAA,0FAAA,mDAAA,2CAAA,wDAAA,+BAAA,6DAAA;AAAA,AAEoB,oBAAMC;AAAN,AAAuB,8BAAA,mFAAA,yFAAA,nMAACG;;AAAxB;;WAFpB,mFAAA,mDAAA,2CAAA,wDAAA,SAAA,uDAAA,2CAAA,mEAAA,uBAAA,+IAAA,5DAMKW,+IAGDC","names":["vcorpstate.views.project-main/project-main-view","cljs.core/deref","selected-project","re_frame.core.subscribe","selected-project-id","expanded-section","has-data?","reagent.core.create_class","re-frame.core/dispatch","p__12579","vec__12580","cljs.core.nth","this","_","prev-props","vec__12583","prev-project-id","and__5000__auto__","cljs.core.not_EQ_","vcorpstate.components.graph/graph-component","vcorpstate.components.sidebar/sidebar"],"sourcesContent":["(ns vcorpstate.views.project-main\n  (:require [re-frame.core :as rf]\n            [reagent.core :as r]\n            [vcorpstate.components.sidebar :as sidebar]\n            [vcorpstate.components.main-content :as main-content]\n            [vcorpstate.components.graph :as graph]))\n\n(defn project-main-view\n  \"Main project view with sidebar and graph\"\n  []\n  (let [selected-project @(rf/subscribe [:selected-project])\n        selected-project-id @(rf/subscribe [:selected-project-id])\n        expanded-section @(rf/subscribe [:expanded-sidebar-section])\n        has-data? @(rf/subscribe [:data/loaded?])]\n    \n    ;; Initialize project data and WebSocket when component mounts\n    (r/create-class\n     {:component-did-mount \n      (fn []\n        (when selected-project-id\n          (rf/dispatch [:project/load selected-project-id])\n          (rf/dispatch [:websocket/connect selected-project-id])))\n      \n      :component-did-update\n      (fn [this [_ prev-props]]\n        (let [[_ prev-project-id] prev-props]\n          (when (and selected-project-id \n                     (not= selected-project-id prev-project-id))\n            (rf/dispatch [:project/load selected-project-id])\n            (rf/dispatch [:websocket/connect selected-project-id]))))\n      \n      :reagent-render\n      (fn []\n        [:div {:class \"relative h-screen bg-gray-50\"\n               :on-click #(when expanded-section (rf/dispatch [:toggle-sidebar-section nil]))}\n         \n         ;; Main content area - now shows the graph\n         [:div {:class \"h-full\" :style {:margin-left \"66px\"}}\n          [graph/graph-component]]\n         \n         ;; Sidebar component\n         [sidebar/sidebar]])})))"]}